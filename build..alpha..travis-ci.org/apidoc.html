<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://spmjs.io/docs/detector/"

    >detector (v2.5.0)</a>
</h1>
<h4>The module for detect client-side information.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.detector">module detector</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.detector.detector">
            function <span class="apidocSignatureSpan"></span>detector
            <span class="apidocSignatureSpan">(rules)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">detector.</span>_rules</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.detector.detector">module detector.detector</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.detector.detector.detector">
            function <span class="apidocSignatureSpan">detector.</span>detector
            <span class="apidocSignatureSpan">(rules)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.detector" id="apidoc.module.detector">module detector</a></h1>


    <h2>
        <a href="#apidoc.element.detector.detector" id="apidoc.element.detector.detector">
        function <span class="apidocSignatureSpan"></span>detector
        <span class="apidocSignatureSpan">(rules)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class Detector {
  constructor (rules) {
    this._rules = rules;
  }

  // 解析 UserAgent 字符串
  // @param {String} ua, userAgent string.
  // @return {Object}
  parse (ua) {
    ua = (ua || &#x22;&#x22;).toLowerCase();
    const d = {};

    init(ua, this._rules.device, function(name, version) {
      const v = parseFloat(version);
      d.device = {
        name: name,
        version: v,
        fullVersion: version,
      };
      d.device[name] = v;
    }, d);

    init(ua, this._rules.os, function(name, version){
      const v = parseFloat(version);
      d.os = {
        name: name,
        version: v,
        fullVersion: version,
      };
      d.os[name] = v;
    }, d);

    const ieCore = this.IEMode(ua);

    init(ua, this._rules.engine, function(name, version) {
      let mode = version;
      // IE 内核的浏览器，修复版本号及兼容模式。
      if(ieCore){
        version = ieCore.engineVersion || ieCore.engineMode;
        mode = ieCore.engineMode;
      }
      const v = parseFloat(version);
      d.engine = {
        name: name,
        version: v,
        fullVersion: version,
        mode: parseFloat(mode),
        fullMode: mode,
        compatible: ieCore ? ieCore.compatible : false,
      };
      d.engine[name] = v;
    }, d);

    init(ua, this._rules.browser, function(name, version) {
      let mode = version;
      // IE 内核的浏览器，修复浏览器版本及兼容模式。
      if(ieCore){
        // 仅修改 IE 浏览器的版本，其他 IE 内核的版本不修改。
        if(name === &#x22;ie&#x22;){
          version = ieCore.browserVersion;
        }
        mode = ieCore.browserMode;
      }
      const v = parseFloat(version);
      d.browser = {
        name: name,
        version: v,
        fullVersion: version,
        mode: parseFloat(mode),
        fullMode: mode,
        compatible: ieCore ? ieCore.compatible : false,
      };
      d.browser[name] = v;
    }, d);
    return d;
  }

  // 解析使用 Trident 内核的浏览器的 `浏览器模式` 和 `文档模式` 信息。
  // @param {String} ua, userAgent string.
  // @return {Object}
  IEMode (ua) {
    if(!this._rules.re_msie.test(ua)){ return null; }

    let m;
    let engineMode;
    let engineVersion;
    let browserMode;
    let browserVersion;

    // IE8 及其以上提供有 Trident 信息，
    // 默认的兼容模式，UA 中 Trident 版本不发生变化。
    if(ua.indexOf(&#x22;trident/&#x22;) !== -1) {
      m = /\btrident\/([0-9.]+)/.exec(ua);
      if (m &#x26;&#x26; m.length &#x3e;= 2) {
        // 真实引擎版本。
        engineVersion = m[1];
        const v_version = m[1].split(&#x22;.&#x22;);
        v_version[0] = parseInt(v_version[0], 10) + 4;
        browserVersion = v_version.join(&#x22;.&#x22;);
      }
    }

    m = this._rules.re_msie.exec(ua);
    browserMode = m[1];
    const v_mode = m[1].split(&#x22;.&#x22;);
    if (typeof browserVersion === &#x22;undefined&#x22;) {
      browserVersion = browserMode;
    }
    v_mode[0] = parseInt(v_mode[0], 10) - 4;
    engineMode = v_mode.join(&#x22;.&#x22;);
    if (typeof engineVersion === &#x22;undefined&#x22;) {
      engineVersion = engineMode;
    }

    return {
      browserVersion: browserVersion,
      browserMode: browserMode,
      engineVersion: engineVersion,
      engineMode: engineMode,
      compatible: engineVersion !== engineMode,
    };
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.detector.detector" id="apidoc.module.detector.detector">module detector.detector</a></h1>


    <h2>
        <a href="#apidoc.element.detector.detector.detector" id="apidoc.element.detector.detector.detector">
        function <span class="apidocSignatureSpan">detector.</span>detector
        <span class="apidocSignatureSpan">(rules)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class Detector {
  constructor (rules) {
    this._rules = rules;
  }

  // 解析 UserAgent 字符串
  // @param {String} ua, userAgent string.
  // @return {Object}
  parse (ua) {
    ua = (ua || &#x22;&#x22;).toLowerCase();
    const d = {};

    init(ua, this._rules.device, function(name, version) {
      const v = parseFloat(version);
      d.device = {
        name: name,
        version: v,
        fullVersion: version,
      };
      d.device[name] = v;
    }, d);

    init(ua, this._rules.os, function(name, version){
      const v = parseFloat(version);
      d.os = {
        name: name,
        version: v,
        fullVersion: version,
      };
      d.os[name] = v;
    }, d);

    const ieCore = this.IEMode(ua);

    init(ua, this._rules.engine, function(name, version) {
      let mode = version;
      // IE 内核的浏览器，修复版本号及兼容模式。
      if(ieCore){
        version = ieCore.engineVersion || ieCore.engineMode;
        mode = ieCore.engineMode;
      }
      const v = parseFloat(version);
      d.engine = {
        name: name,
        version: v,
        fullVersion: version,
        mode: parseFloat(mode),
        fullMode: mode,
        compatible: ieCore ? ieCore.compatible : false,
      };
      d.engine[name] = v;
    }, d);

    init(ua, this._rules.browser, function(name, version) {
      let mode = version;
      // IE 内核的浏览器，修复浏览器版本及兼容模式。
      if(ieCore){
        // 仅修改 IE 浏览器的版本，其他 IE 内核的版本不修改。
        if(name === &#x22;ie&#x22;){
          version = ieCore.browserVersion;
        }
        mode = ieCore.browserMode;
      }
      const v = parseFloat(version);
      d.browser = {
        name: name,
        version: v,
        fullVersion: version,
        mode: parseFloat(mode),
        fullMode: mode,
        compatible: ieCore ? ieCore.compatible : false,
      };
      d.browser[name] = v;
    }, d);
    return d;
  }

  // 解析使用 Trident 内核的浏览器的 `浏览器模式` 和 `文档模式` 信息。
  // @param {String} ua, userAgent string.
  // @return {Object}
  IEMode (ua) {
    if(!this._rules.re_msie.test(ua)){ return null; }

    let m;
    let engineMode;
    let engineVersion;
    let browserMode;
    let browserVersion;

    // IE8 及其以上提供有 Trident 信息，
    // 默认的兼容模式，UA 中 Trident 版本不发生变化。
    if(ua.indexOf(&#x22;trident/&#x22;) !== -1) {
      m = /\btrident\/([0-9.]+)/.exec(ua);
      if (m &#x26;&#x26; m.length &#x3e;= 2) {
        // 真实引擎版本。
        engineVersion = m[1];
        const v_version = m[1].split(&#x22;.&#x22;);
        v_version[0] = parseInt(v_version[0], 10) + 4;
        browserVersion = v_version.join(&#x22;.&#x22;);
      }
    }

    m = this._rules.re_msie.exec(ua);
    browserMode = m[1];
    const v_mode = m[1].split(&#x22;.&#x22;);
    if (typeof browserVersion === &#x22;undefined&#x22;) {
      browserVersion = browserMode;
    }
    v_mode[0] = parseInt(v_mode[0], 10) - 4;
    engineMode = v_mode.join(&#x22;.&#x22;);
    if (typeof engineVersion === &#x22;undefined&#x22;) {
      engineVersion = engineMode;
    }

    return {
      browserVersion: browserVersion,
      browserMode: browserMode,
      engineVersion: engineVersion,
      engineMode: engineMode,
      compatible: engineVersion !== engineMode,
    };
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
